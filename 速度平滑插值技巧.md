# 速度平滑插值技巧

## 公式

```gdscript
velocity = velocity.lerp(desired_velocity, 1 - exp(-acceleration * get_process_delta_time()))
```

## 原理

这个公式使用**指数衰减**实现帧率无关的平滑插值。

- `exp(-accel * dt)` 随时间指数衰减
- `1 - exp(-accel * dt)` 得到接近目标的速度因子
- `accel` 控制达到目标速度的快慢

## 与普通 lerp 的对比

| 普通 lerp | 指数平滑 lerp |
|-----------|---------------|
| 帧率相关，高 FPS 变化更快 | **帧率无关**，物理稳定 |
| 固定比例接近 | 模拟真实物理加速 |

## 代码示例

```gdscript
extends Node
class_name MovementComponent

@export var max_speed: float = 200.0
@export var acceleration: float = 50.0

var velocity: Vector2 = Vector2.ZERO

func accelerate_in_direction(direction: Vector2):
    var desired_velocity = direction * max_speed
    velocity = velocity.lerp(
        desired_velocity,
        1 - exp(-acceleration * get_process_delta_time())
    )
```

## 适用场景

- 角色移动惯性
- 摄像机跟随
- 任何需要平滑加减速的效果

## 参考

- 项目路径：`C:\Godot\cat-knight\Scenes\Components\movement_component.gd`
